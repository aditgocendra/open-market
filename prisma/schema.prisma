generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["relationJoins"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Category {
  id          String        @id @db.Char(3)
  name        String        @unique @db.VarChar(24)
  icon        String        @unique
  createdAt   DateTime      @default(now())
  SubCategory SubCategory[]
  Product     Product[]
}

model SubCategory {
  name       String    @unique @db.VarChar(32)
  category   Category  @relation(fields: [idCategory], references: [id])
  idCategory String
  Product    Product[]
}

model Product {
  id              String         @id @default(cuid())
  name            String         @db.VarChar(128)
  price           Int
  category        Category       @relation(fields: [idCategory], references: [id])
  idCategory      String
  subCategory     SubCategory    @relation(fields: [nameSubCategory], references: [name])
  nameSubCategory String
  DetailProduct   DetailProduct?
  ProductImages   ProductImage[]
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
}

model ProductImage {
  id        Int     @id @default(autoincrement())
  image     String  @db.VarChar(128)
  isThumb   Boolean @default(false)
  product   Product @relation(fields: [idProduct], references: [id])
  idProduct String
}

model DetailProduct {
  seen        Int
  totalStock  Int
  totalSold   Int
  totalFav    Int
  description String  @db.VarChar(256)
  product     Product @relation(fields: [idProduct], references: [id])
  idProduct   String  @unique
}

model VariantProduct {
  id      Int     @id @default(autoincrement())
  variant String  @db.VarChar(24)
  price   Int
  image   String? @db.VarChar(128)
}
